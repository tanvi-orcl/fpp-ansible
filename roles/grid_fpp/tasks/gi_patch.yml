- name: 'Assert GI Create WC Variables are defined.'
  assert: { that: source_wc is defined and dest_wc is defined }

# changed to include
- block:
  - name: 'Check if Source Home is WC'
    include_role:
      name: 'fpp_common'
      tasks_from: 'wc_query.yml'
    vars:
      wc_name: '{{ source_wc }}'

  - name: 'Check if New Home is WC'
    include_role:
      name: 'fpp_common'
      tasks_from: 'wc_query.yml'
    vars:
      wc_name: '{{ dest_wc }}'

  - name: 'Patch GI Image EVAL'
    include_role:
      name: 'fpp_common'
      tasks_from: 'patch_grid.yml'
    vars:
      target_node: '{{ ansible_hostname }}'
      ignorewcpatches_param: '-ignorewcpatches'
      eval_param: '-eval'
      
  - name: 'Patch GI Image'
    include_role:
      name: 'fpp_common'
      tasks_from: 'patch_grid.yml'
    vars:
      target_node: '{{ ansible_hostname }}'
      ignorewcpatches_param: '-ignorewcpatches'
  delegate_to: '{{ fpp_host }}'